# API Docs

## Sourcemapper

### text _(Source Mapper)_

<p style="word-wrap: break-word">Text to siddhi event source mapper. Transports which accepts text messages can utilize this extensionto convert the incoming text message to Siddhi event. Users can either onEventHandler a pre-defined text format where event conversion will happen without any configs or can use regex to map from a custom text message.</p>

#### Syntax

```
@source(..., @map(type="text", regex.groupid="<STRING>", fail.on.missing.attribute="<BOOL>", event.grouping.enabled="<BOOL>", delimiter="<STRING>", new.line.character="<STRING>")
```

##### Query Parameters

<table>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td valign="top">regex.groupid</td>
        <td valign="top"><p style="word-wrap: break-word">Used to specify regular expression group. Here groupid can be any capital letter such as regex.A,regex.B .. etc. User can specify any number of regular expression groups and in attribute section,user need to map particular attributes to the regular expression group with the matching group index at the attribute section. If user need to enable custom mapping, it is mandatory to specify matching group for each and every attribute.</p></td>
        <td valign="top"></td>
        <td valign="top">STRING</td>
        <td valign="top">No</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">fail.on.missing.attribute</td>
        <td valign="top"><p style="word-wrap: break-word">This can either have value 'true' or 'false'. By default it will be true. This attribute allows user to handle unknown attributes. By default if an regex execution fails or attribute is not present in event, SP will drop that message. However setting this property to false will prompt DAS to onEventHandler and event with 'null' value to Siddhi.</p></td>
        <td valign="top">true</td>
        <td valign="top">BOOL</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">event.grouping.enabled</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute is used to specify weather event group is enabled or not. if user need to receive group of events together and generate multiple siddhi event user can enable this by specifying true.</p></td>
        <td valign="top">false</td>
        <td valign="top">BOOL</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">delimiter</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute indicate the delimiter of grouped event which is expected to receive. This should be whole line and cannot be single character.</p></td>
        <td valign="top">~~~~~~~~~~</td>
        <td valign="top">STRING</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">new.line.character</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute indicate the new line character of event which is expected to receive. This is used mostly when communication between 2 types of operating systems. As example Linux use '<br>' is it's end of line character while windows use '<br>' for that.</p></td>
        <td valign="top">
</td>
        <td valign="top">STRING</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
</table>



#### Examples

##### Example 1

```
@source(type='inMemory', topic='stock', @map(type='text'))
define stream FooStream (symbol string, price float, volume long);

```
<p style="word-wrap: break-word">Above configuration will do a default text input mapping. Expected input will look like below.symbol:"WSO2",<br>price:55.6,<br>volume:100ORsymbol:'WSO2',<br>price:55.6,<br>volume:100If group events is enabled then input will look like below.symbol:'WSO2',<br>price:55.6,<br>volume:100<br>~~~~~~~~~~<br>symbol:'WSO2',<br>price:55.6,<br>volume:100</p>

##### Example 2

```
@source(type='inMemory', topic='stock', @map(type='text', fail.on.unknown.attribute = 'true', regex.A='(\w+)\s([-0-9]+)',regex.B='volume\s([-0-9]+)', @attributes(symbol = 'A[1]',price = 'A[2]',volume = 'B' )
```
<p style="word-wrap: break-word">Above configuration will perform a custom text mapping. Expected input will look like below.wos2 550 volume 100</p>

## Sinkmapper

### text _(Sink Mapper)_

<p style="word-wrap: break-word">Text to Event input mapper. Transports which accepts text messages can utilize this extensionto convert the incoming text message to Siddhi event. Users can either use  a pre-defined text format where event conversion will happen without any configs or use placehosders to map from a custom text message.</p>

#### Syntax

```
@sink(..., @map(type="text", event.grouping.enabled="<BOOL>", delimiter="<STRING>", new.line.character="<STRING>")
```

##### Query Parameters

<table>
    <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Default Value</th>
        <th>Possible Data Types</th>
        <th>Optional</th>
        <th>Dynamic</th>
    </tr>
    <tr>
        <td valign="top">event.grouping.enabled</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute is used to specify whether event group is enabled or not. If user needs to publish group of events together user can enable this by specifying 'true'.</p></td>
        <td valign="top">false</td>
        <td valign="top">BOOL</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">delimiter</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute indicate the delimiter of grouped event which is expected to receive. This should be whole line cannot be single character.</p></td>
        <td valign="top">~~~~~~~~~~</td>
        <td valign="top">STRING</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
    <tr>
        <td valign="top">new.line.character</td>
        <td valign="top"><p style="word-wrap: break-word">This attribute indicate the new line character of event which is expected to receive. This is used mostly when communication between 2 types of operating systems. As example Linux use '<br>' is it's end of line character while windows use '<br>' for that.</p></td>
        <td valign="top">
</td>
        <td valign="top">STRING</td>
        <td valign="top">Yes</td>
        <td valign="top">No</td>
    </tr>
</table>



#### Examples

##### Example 1

```
@sink(type='inMemory', topic='stock', @map(type='text'))
define stream FooStream (symbol string, price float, volume long);

```
<p style="word-wrap: break-word">Above configuration will do a default text input mapping. Expected input is siddhi event and output will look like below.symbol:"WSO2",<br>price:55.6,<br>volume:100orsymbol:'WSO2',<br>price:55.6,<br>volume:100If group events is enabled then output will look like below.symbol:'WSO2',<br>price:55.6,<br>volume:100<br>~~~~~~~~~~<br>symbol:'WSO2',<br>price:55.6,<br>volume:100</p>

##### Example 2

```
@sink(type='inMemory', topic='stock', @map(type='text',  @payload(SensorID : {{symbol}}/{{Volume}},
SensorPrice : Rs{{price}}/=,
Value : {{Volume}}ml‚Äù)))
```
<p style="word-wrap: break-word">Above configuration will perform a custom text mapping. Produce output will look like below.SensorID : wso2/100,<br>SensorPrice : Rs1000/=,<br>Value : 100mlfor below siddhi event.{wso2,1000,100}</p>

